create table discord_channel (active bit not null, created_at datetime(6) not null, id bigint not null auto_increment, updated_at datetime(6) not null, discord_channel_id varchar(100) not null, discord_guild_id varchar(100), primary key (id)) engine=InnoDB;
create table keyword (created_at datetime(6) not null, id bigint not null auto_increment, subscription_id bigint not null, updated_at datetime(6) not null, value varchar(100) not null, primary key (id)) engine=InnoDB;
create table notification (success bit not null, created_at datetime(6) not null, id bigint not null auto_increment, sent_at datetime(6), stream_event_id bigint not null, updated_at datetime(6) not null, receiver_id varchar(100) not null, error_message varchar(500), message TEXT, primary key (id)) engine=InnoDB;
create table streamer (average_viewer_count integer not null, live bit not null, created_at datetime(6) not null, id bigint not null auto_increment, updated_at datetime(6) not null, channel_id varchar(255) not null, nickname varchar(255) not null, primary key (id)) engine=InnoDB;
create table stream_event (chat_count integer not null, viewer_count integer not null, viewer_increase_rate float(23) not null, created_at datetime(6) not null, id bigint not null auto_increment, stream_metrics_id bigint not null, updated_at datetime(6) not null, summary varchar(500), event_type enum ('END','HOT','START','TOPIC') not null, primary key (id)) engine=InnoDB;
create table stream_metrics (viewer_count integer not null, created_at datetime(6) not null, id bigint not null auto_increment, stream_session_id bigint not null, updated_at datetime(6) not null, category varchar(255) not null, title varchar(255) not null, primary key (id)) engine=InnoDB;
create table stream_session (average_viewer_count integer not null, peak_viewer_count integer not null, created_at datetime(6) not null, ended_at datetime(6), id bigint not null auto_increment, started_at datetime(6) not null, streamer_id bigint not null, updated_at datetime(6) not null, category varchar(255) not null, title varchar(255) not null, primary key (id)) engine=InnoDB;
create table subscription (active bit not null, created_at datetime(6) not null, discord_channel_id bigint not null, id bigint not null auto_increment, streamer_id bigint, updated_at datetime(6) not null, event_type enum ('END','HOT','START','TOPIC') not null, primary key (id)) engine=InnoDB;
create table tag (created_at datetime(6) not null, id bigint not null auto_increment, stream_metrics_id bigint, stream_session_id bigint, updated_at datetime(6) not null, value varchar(255) not null, primary key (id)) engine=InnoDB;
alter table discord_channel add constraint UKbqu45suigga060c3qx2h9b5s7 unique (discord_channel_id);
alter table keyword add constraint FKowolhq6jqpxn5vj6d4j3ihq86 foreign key (subscription_id) references subscription (id);
alter table notification add constraint FKhc6h3d2yaw37w371f7q1337gl foreign key (stream_event_id) references stream_event (id);
alter table stream_event add constraint FK3f1hdk8lny85fe1cmusp07uac foreign key (stream_metrics_id) references stream_metrics (id);
alter table stream_metrics add constraint FKlpduxv43su0t2jbqukmvqd1je foreign key (stream_session_id) references stream_session (id);
alter table stream_session add constraint FKhqcg23ptlvmv0td5208v3ahoq foreign key (streamer_id) references streamer (id);
alter table subscription add constraint FKncaxtj73u376eg74hgefon235 foreign key (discord_channel_id) references discord_channel (id);
alter table subscription add constraint FK4lu6hukbiie09xy80rflvkjpc foreign key (streamer_id) references streamer (id);
alter table tag add constraint FKkq4fxgqli9hqa0ihvck2bukbq foreign key (stream_metrics_id) references stream_metrics (id);
alter table tag add constraint FKf21vuyymp8olvb3s78r540gk8 foreign key (stream_session_id) references stream_session (id);
